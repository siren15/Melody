
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../persistentroles/">
      
      
        <link rel="next" href="../tags/">
      
      <link rel="icon" href="https://cdn.discordapp.com/avatars/887648476387762186/ab9b45d840a51ce343c2f9cf17e1ece8.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.6">
    
    
      
        <title>Sp2yt - Melody</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="discord-light" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#extentions.sp2yt.SpotifyToYoutube.sp2yt" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://www.beni2am.space/melody" title="Melody" class="md-header__button md-logo" aria-label="Melody" data-md-component="logo">
      
  <img src="https://cdn.discordapp.com/avatars/887648476387762186/ab9b45d840a51ce343c2f9cf17e1ece8.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Melody
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sp2yt
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.beni2am.space/melody" title="Melody" class="md-nav__button md-logo" aria-label="Melody" data-md-component="logo">
      
  <img src="https://cdn.discordapp.com/avatars/887648476387762186/ab9b45d840a51ce343c2f9cf17e1ece8.png" alt="logo">

    </a>
    Melody
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../automod/" class="md-nav__link">
        Automod
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        Basic
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../buttonroles/" class="md-nav__link">
        Buttonroles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../config_commands/" class="md-nav__link">
        Config commands
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../event_logs/" class="md-nav__link">
        Event logs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../giveroles/" class="md-nav__link">
        Giveroles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../leveling/" class="md-nav__link">
        Leveling
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../moderation/" class="md-nav__link">
        Moderation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../persistentroles/" class="md-nav__link">
        Persistentroles
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Sp2yt
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Sp2yt
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.sp2yt" class="md-nav__link">
    sp2yt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.add_music_channel" class="md-nav__link">
    add_music_channel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.remove_music_channel" class="md-nav__link">
    remove_music_channel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicAddIgnoredRoles" class="md-nav__link">
    MusicAddIgnoredRoles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicRemoveIgnoredRoles" class="md-nav__link">
    MusicRemoveIgnoredRoles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicAddIgnoredMember" class="md-nav__link">
    MusicAddIgnoredMember()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicRemoveIgnoredMember" class="md-nav__link">
    MusicRemoveIgnoredMember()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tags/" class="md-nav__link">
        Tags
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.sp2yt" class="md-nav__link">
    sp2yt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.add_music_channel" class="md-nav__link">
    add_music_channel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.remove_music_channel" class="md-nav__link">
    remove_music_channel()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicAddIgnoredRoles" class="md-nav__link">
    MusicAddIgnoredRoles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicRemoveIgnoredRoles" class="md-nav__link">
    MusicRemoveIgnoredRoles()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicAddIgnoredMember" class="md-nav__link">
    MusicAddIgnoredMember()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extentions.sp2yt.SpotifyToYoutube.MusicRemoveIgnoredMember" class="md-nav__link">
    MusicRemoveIgnoredMember()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Sp2yt</h1>

<div class="doc doc-object doc-class">



  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><span title="interactions.Extension">Extension</span></code></p>



        <details class="quote">
          <summary>Source code in <code>extentions/sp2yt.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SpotifyToYoutube</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">:</span> <span class="n">Client</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="n">bot</span>

    <span class="nd">@listen</span><span class="p">()</span> 
    <span class="k">async</span> <span class="k">def</span> <span class="nf">spotify_link_listen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">MessageCreate</span><span class="p">):</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">author</span> <span class="c1"># get the user who sent the message</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span> <span class="c1"># get the content of the message</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">bot</span><span class="p">:</span> <span class="c1"># if the user is a bot, return</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">message</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># if the message is empty, return</span>
            <span class="k">return</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;guildid&#39;</span><span class="p">:</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span> <span class="c1"># get the settings for the guild from the database</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># if there are no settings for the guild, insert default settings</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="o">.</span><span class="n">has_permission</span><span class="p">(</span><span class="n">Permissions</span><span class="o">.</span><span class="n">ADMINISTRATOR</span><span class="p">):</span> <span class="c1"># if the user is not an administrator</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_users</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># if there are ignored users in the settings</span>
                <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_users</span><span class="p">:</span> <span class="c1"># if the user is in the ignored users list, return</span>
                    <span class="k">return</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_roles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># if there are ignored roles in the settings</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">role</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">user</span><span class="o">.</span><span class="n">roles</span> <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_roles</span><span class="p">):</span> <span class="c1"># if the user has an ignored role, return</span>
                    <span class="k">return</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">music_channels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># if there are music channels in the settings</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">music_channels</span><span class="p">:</span> <span class="c1"># if the message is not in a music channel, return</span>
                <span class="k">return</span>
        <span class="n">spotify_url</span> <span class="o">=</span> <span class="n">get_spotify_url</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="c1"># get the Spotify URL from the message</span>
        <span class="k">if</span> <span class="n">spotify_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># if there is a Spotify URL in the message</span>
            <span class="k">if</span> <span class="s2">&quot;track&quot;</span> <span class="ow">in</span> <span class="n">spotify_url</span><span class="p">:</span> <span class="c1"># if the URL is for a track</span>
                <span class="n">song</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">track</span><span class="p">(</span><span class="n">spotify_url</span><span class="p">)</span> <span class="c1"># get the track information from the Spotify API</span>
                <span class="n">query_type</span> <span class="o">=</span> <span class="s1">&#39;songs&#39;</span>
            <span class="k">if</span> <span class="s2">&quot;album&quot;</span> <span class="ow">in</span> <span class="n">spotify_url</span><span class="p">:</span> <span class="c1"># if the URL is for an album</span>
                <span class="n">song</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">album</span><span class="p">(</span><span class="n">spotify_url</span><span class="p">)</span> <span class="c1"># get the album information from the Spotify API</span>
                <span class="n">query_type</span> <span class="o">=</span> <span class="s1">&#39;albums&#39;</span>
            <span class="n">youtube_search</span> <span class="o">=</span> <span class="n">ytmusic</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;artists&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query_type</span><span class="p">)</span> <span class="c1"># search for the song on YouTube Music</span>
            <span class="k">if</span> <span class="n">query_type</span> <span class="o">==</span> <span class="s1">&#39;songs&#39;</span><span class="p">:</span> <span class="c1"># if the search is for a song</span>
                <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://music.youtube.com/watch?v=</span><span class="si">{</span><span class="n">youtube_search</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;videoId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="c1"># get the URL for the song on YouTube Music</span>
            <span class="k">elif</span> <span class="n">query_type</span> <span class="o">==</span> <span class="s1">&#39;albums&#39;</span><span class="p">:</span> <span class="c1"># if the search is for an album</span>
                <span class="n">albumsearch</span> <span class="o">=</span> <span class="n">ytmusic</span><span class="o">.</span><span class="n">get_album</span><span class="p">(</span><span class="n">youtube_search</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;browseId&#39;</span><span class="p">])</span> <span class="c1"># get the album information from YouTube Music</span>
                <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://music.youtube.com/playlist?list=</span><span class="si">{</span><span class="n">albumsearch</span><span class="p">[</span><span class="s1">&#39;audioPlaylistId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="c1"># get the URL for the album on YouTube Music</span>
            <span class="k">await</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">allowed_mentions</span><span class="o">=</span><span class="n">AllowedMentions</span><span class="p">(</span><span class="n">replied_user</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="c1"># reply to the message with the YouTube Music URL</span>

    <span class="nd">@slash_command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sp2yt&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Translate Spotify links to YouTube Music links&#39;</span><span class="p">)</span>
    <span class="nd">@slash_option</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Spotify URL to translate&#39;</span><span class="p">,</span> <span class="n">opt_type</span><span class="o">=</span><span class="n">OptionType</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">sp2yt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">SlashContext</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;/sp2yt</span>
<span class="sd">        Description:</span>
<span class="sd">            The sp2yt function takes a Spotify URL and converts it to a YouTube Music URL.</span>
<span class="sd">            It does this by first checking if the url is valid, then checks if it&#39;s either an album or song.</span>
<span class="sd">            If it&#39;s an album, we search for the album on YTMusic and get its playlist ID. We then send that playlist ID as a link to the user in chat.</span>
<span class="sd">            If it&#39;s not an album but instead is a song, we search for that song on YTMusic and get its videoId (the unique identifier of each video). We then send that videoId as a link to the user in chat</span>

<span class="sd">        Args:</span>
<span class="sd">            url: The spotify URL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;guildid&#39;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">spotify_url</span> <span class="o">=</span> <span class="n">get_spotify_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">spotify_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;track&quot;</span> <span class="ow">in</span> <span class="n">spotify_url</span><span class="p">:</span>
                <span class="n">song</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">track</span><span class="p">(</span><span class="n">spotify_url</span><span class="p">)</span>
                <span class="n">query_type</span> <span class="o">=</span> <span class="s1">&#39;songs&#39;</span>
            <span class="k">if</span> <span class="s2">&quot;album&quot;</span> <span class="ow">in</span> <span class="n">spotify_url</span><span class="p">:</span>
                <span class="n">song</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">album</span><span class="p">(</span><span class="n">spotify_url</span><span class="p">)</span>
                <span class="n">query_type</span> <span class="o">=</span> <span class="s1">&#39;albums&#39;</span>
            <span class="c1"># print(song[&quot;artists&quot;][0][&quot;name&quot;], song[&#39;name&#39;])</span>
            <span class="n">youtube_search</span> <span class="o">=</span> <span class="n">ytmusic</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;artists&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query_type</span><span class="p">)</span>
            <span class="c1"># print(youtube_search[0])</span>
            <span class="k">if</span> <span class="n">query_type</span> <span class="o">==</span> <span class="s1">&#39;songs&#39;</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://music.youtube.com/watch?v=</span><span class="si">{</span><span class="n">youtube_search</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;videoId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">elif</span> <span class="n">query_type</span> <span class="o">==</span> <span class="s1">&#39;albums&#39;</span><span class="p">:</span>
                <span class="n">albumsearch</span> <span class="o">=</span> <span class="n">ytmusic</span><span class="o">.</span><span class="n">get_album</span><span class="p">(</span><span class="n">youtube_search</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;browseId&#39;</span><span class="p">])</span>
                <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://music.youtube.com/playlist?list=</span><span class="si">{</span><span class="n">albumsearch</span><span class="p">[</span><span class="s1">&#39;audioPlaylistId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;This is either not a Spotify URL or this Spotify URL is not supported. I only support Spotify Track and Album URLs.&quot;</span><span class="p">)</span>

    <span class="n">sp2yt_manage</span> <span class="o">=</span> <span class="n">SlashCommand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sp2yt_manage&#39;</span><span class="p">,</span> <span class="n">default_member_permissions</span><span class="o">=</span><span class="n">Permissions</span><span class="o">.</span><span class="n">ADMINISTRATOR</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Manage the Spotify to YouTube settings.&#39;</span><span class="p">)</span>

    <span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;music_channel&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;Add a channel to music channels.&#39;</span><span class="p">)</span>
    <span class="nd">@channel</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_music_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage music_channel add</span>
<span class="sd">        Description:</span>
<span class="sd">            Add a channel to the list of music channels. The bot will listen to spotify links in these channels.</span>

<span class="sd">        Args:</span>
<span class="sd">            channel (OptionType.CHANNEL): Specify the channel you want to add to the music channels list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">channel</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="n">music_channels</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">music_channels</span>
        <span class="k">if</span> <span class="n">music_channels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">music_channels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is already a music channel..&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">music_channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_channel</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">]</span>
        <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ch</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">channel_mentions</span> <span class="k">if</span> <span class="n">ch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">channel_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">channel_mentions</span><span class="p">)</span>
        <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Channel </span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> set as a music channel.&quot;</span><span class="p">)</span>
        <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Music Channels&#39;</span><span class="p">,</span> <span class="n">channel_mentions</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;music_channel&#39;</span><span class="p">,</span> <span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove a channel from music channels.&#39;</span><span class="p">)</span>
    <span class="nd">@channel</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">remove_music_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage music_channel remove</span>
<span class="sd">        description:</span>
<span class="sd">            Remove a channel from the list of music channels.</span>
<span class="sd">            If no channel is specified, it will remove the current channel.</span>

<span class="sd">        Args:</span>
<span class="sd">            channel (OptionType.CHANNEL): Specify the channel that is being removed from the music channels list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">channel</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">music_channels</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">music_channels</span>
        <span class="k">if</span> <span class="n">music_channels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">music_channels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is not a music channel.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">music_channels</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_channel</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">]</span>
        <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ch</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">channel_mentions</span> <span class="k">if</span> <span class="n">ch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">channel_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">channel_mentions</span><span class="p">)</span>
        <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Channel </span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> removed from being a music channel.&quot;</span><span class="p">)</span>
        <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Music Channels&#39;</span><span class="p">,</span> <span class="n">channel_mentions</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_role&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;Make a role to be ignored in music channels.&#39;</span><span class="p">)</span>
    <span class="nd">@role</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">MusicAddIgnoredRoles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">ROLE</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_role add</span>
<span class="sd">        Description:</span>
<span class="sd">            Add a role to the list of roles ignored in music channels.</span>

<span class="sd">        Args:</span>
<span class="sd">            role (OptionType.ROLE): Get the role that is being ignored</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">ignored_roles</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_roles</span>
        <span class="k">if</span> <span class="n">ignored_roles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ignored_roles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is already ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ignored_roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">role</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_role</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">]</span>
        <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">role_mentions</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">role_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">role_mentions</span><span class="p">)</span>
        <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Role </span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> was added to roles ignored in music channels.&quot;</span><span class="p">)</span>
        <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Roles&#39;</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_role&#39;</span><span class="p">,</span> <span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove a role from being ignored in music channels.&#39;</span><span class="p">)</span>
    <span class="nd">@role</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">MusicRemoveIgnoredRoles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">ROLE</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_role remove</span>
<span class="sd">        Remove a role from the list of roles that are ignored in music channels.</span>

<span class="sd">        Args:</span>
<span class="sd">            role (OptionType.ROLE): Role that is gonna be ignored</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">ignored_roles</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_roles</span>
        <span class="k">if</span> <span class="n">ignored_roles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ignored_roles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is not being ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ignored_roles</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">role</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_role</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">]</span>
        <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">role_mentions</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">role_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">role_mentions</span><span class="p">)</span>
        <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Role </span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> was removed from being ignored in music channels.&quot;</span><span class="p">)</span>
        <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Roles&#39;</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_member&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;Make a member to be ignored in music channels.&#39;</span><span class="p">)</span>
    <span class="nd">@user</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">MusicAddIgnoredMember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">USER</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_member add</span>
<span class="sd">        Description:</span>
<span class="sd">            Add a user to the list of ignored users in music channels.</span>
<span class="sd">            This means that they will not be able to use any commands in music channels.</span>

<span class="sd">        Args:</span>
<span class="sd">            user (OptionType.USER): User to add to the ignored list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">ignored_users</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_users</span>
        <span class="k">if</span> <span class="n">ignored_users</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ignored_users</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">|</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> is already ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ignored_users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">]</span>
        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">)&#39;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">users</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">users</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
        <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Member </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">) was added to members ignored in music channels.&quot;</span><span class="p">)</span>
        <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Members&#39;</span><span class="p">,</span> <span class="n">users</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_member&#39;</span><span class="p">,</span> <span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove a member from being ignored in music channels.&#39;</span><span class="p">)</span>
    <span class="nd">@user</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">MusicRemoveIgnoredMember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">USER</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_member remove</span>
<span class="sd">        Description:</span>
<span class="sd">            Remove a user from the ignored list for music channels.</span>


<span class="sd">        Args:</span>
<span class="sd">            user (OptionType.USER): Specify the user to be removed from the ignored list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
           <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">ignored_users</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_users</span>
        <span class="k">if</span> <span class="n">ignored_users</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ignored_users</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">|</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> is not being ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ignored_users</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">]</span>
        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">)&#39;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">users</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">users</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
        <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Member </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">) was removed from being ignored in music channels.&quot;</span><span class="p">)</span>
        <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Members&#39;</span><span class="p">,</span> <span class="n">users</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-function">



<h3 id="extentions.sp2yt.SpotifyToYoutube.sp2yt" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sp2yt</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>/sp2yt</p>

<details class="description">
  <summary>Description</summary>
  <p>The sp2yt function takes a Spotify URL and converts it to a YouTube Music URL.
It does this by first checking if the url is valid, then checks if it's either an album or song.
If it's an album, we search for the album on YTMusic and get its playlist ID. We then send that playlist ID as a link to the user in chat.
If it's not an album but instead is a song, we search for that song on YTMusic and get its videoId (the unique identifier of each video). We then send that videoId as a link to the user in chat</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>url</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>The spotify URL</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>extentions/sp2yt.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@slash_command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sp2yt&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Translate Spotify links to YouTube Music links&#39;</span><span class="p">)</span>
<span class="nd">@slash_option</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Spotify URL to translate&#39;</span><span class="p">,</span> <span class="n">opt_type</span><span class="o">=</span><span class="n">OptionType</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">sp2yt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">SlashContext</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;/sp2yt</span>
<span class="sd">    Description:</span>
<span class="sd">        The sp2yt function takes a Spotify URL and converts it to a YouTube Music URL.</span>
<span class="sd">        It does this by first checking if the url is valid, then checks if it&#39;s either an album or song.</span>
<span class="sd">        If it&#39;s an album, we search for the album on YTMusic and get its playlist ID. We then send that playlist ID as a link to the user in chat.</span>
<span class="sd">        If it&#39;s not an album but instead is a song, we search for that song on YTMusic and get its videoId (the unique identifier of each video). We then send that videoId as a link to the user in chat</span>

<span class="sd">    Args:</span>
<span class="sd">        url: The spotify URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;guildid&#39;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="n">spotify_url</span> <span class="o">=</span> <span class="n">get_spotify_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">spotify_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;track&quot;</span> <span class="ow">in</span> <span class="n">spotify_url</span><span class="p">:</span>
            <span class="n">song</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">track</span><span class="p">(</span><span class="n">spotify_url</span><span class="p">)</span>
            <span class="n">query_type</span> <span class="o">=</span> <span class="s1">&#39;songs&#39;</span>
        <span class="k">if</span> <span class="s2">&quot;album&quot;</span> <span class="ow">in</span> <span class="n">spotify_url</span><span class="p">:</span>
            <span class="n">song</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">album</span><span class="p">(</span><span class="n">spotify_url</span><span class="p">)</span>
            <span class="n">query_type</span> <span class="o">=</span> <span class="s1">&#39;albums&#39;</span>
        <span class="c1"># print(song[&quot;artists&quot;][0][&quot;name&quot;], song[&#39;name&#39;])</span>
        <span class="n">youtube_search</span> <span class="o">=</span> <span class="n">ytmusic</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;artists&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query_type</span><span class="p">)</span>
        <span class="c1"># print(youtube_search[0])</span>
        <span class="k">if</span> <span class="n">query_type</span> <span class="o">==</span> <span class="s1">&#39;songs&#39;</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://music.youtube.com/watch?v=</span><span class="si">{</span><span class="n">youtube_search</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;videoId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">query_type</span> <span class="o">==</span> <span class="s1">&#39;albums&#39;</span><span class="p">:</span>
            <span class="n">albumsearch</span> <span class="o">=</span> <span class="n">ytmusic</span><span class="o">.</span><span class="n">get_album</span><span class="p">(</span><span class="n">youtube_search</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;browseId&#39;</span><span class="p">])</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://music.youtube.com/playlist?list=</span><span class="si">{</span><span class="n">albumsearch</span><span class="p">[</span><span class="s1">&#39;audioPlaylistId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;This is either not a Spotify URL or this Spotify URL is not supported. I only support Spotify Track and Album URLs.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="extentions.sp2yt.SpotifyToYoutube.add_music_channel" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_music_channel</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>/sp2yt_manage music_channel add</p>

<details class="description">
  <summary>Description</summary>
  <p>Add a channel to the list of music channels. The bot will listen to spotify links in these channels.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>channel</code></td>
          <td>
                <code><span title="interactions.OptionType">OptionType</span>.<span title="interactions.OptionType.CHANNEL">CHANNEL</span></code>
          </td>
          <td><p>Specify the channel you want to add to the music channels list</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>extentions/sp2yt.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;music_channel&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;Add a channel to music channels.&#39;</span><span class="p">)</span>
<span class="nd">@channel</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">add_music_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage music_channel add</span>
<span class="sd">    Description:</span>
<span class="sd">        Add a channel to the list of music channels. The bot will listen to spotify links in these channels.</span>

<span class="sd">    Args:</span>
<span class="sd">        channel (OptionType.CHANNEL): Specify the channel you want to add to the music channels list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">channel</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="n">music_channels</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">music_channels</span>
    <span class="k">if</span> <span class="n">music_channels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">music_channels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is already a music channel..&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">music_channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_channel</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">]</span>
    <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ch</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">channel_mentions</span> <span class="k">if</span> <span class="n">ch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">channel_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">channel_mentions</span><span class="p">)</span>
    <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Channel </span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> set as a music channel.&quot;</span><span class="p">)</span>
    <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Music Channels&#39;</span><span class="p">,</span> <span class="n">channel_mentions</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="extentions.sp2yt.SpotifyToYoutube.remove_music_channel" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_music_channel</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">channel</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>/sp2yt_manage music_channel remove</p>

<details class="description">
  <summary>description</summary>
  <p>Remove a channel from the list of music channels.
If no channel is specified, it will remove the current channel.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>channel</code></td>
          <td>
                <code><span title="interactions.OptionType">OptionType</span>.<span title="interactions.OptionType.CHANNEL">CHANNEL</span></code>
          </td>
          <td><p>Specify the channel that is being removed from the music channels list</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>extentions/sp2yt.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;music_channel&#39;</span><span class="p">,</span> <span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove a channel from music channels.&#39;</span><span class="p">)</span>
<span class="nd">@channel</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">remove_music_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage music_channel remove</span>
<span class="sd">    description:</span>
<span class="sd">        Remove a channel from the list of music channels.</span>
<span class="sd">        If no channel is specified, it will remove the current channel.</span>

<span class="sd">    Args:</span>
<span class="sd">        channel (OptionType.CHANNEL): Specify the channel that is being removed from the music channels list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">channel</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="n">music_channels</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">music_channels</span>
    <span class="k">if</span> <span class="n">music_channels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">music_channels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is not a music channel.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">music_channels</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_channel</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">music_channels</span><span class="p">]</span>
    <span class="n">channel_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ch</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">channel_mentions</span> <span class="k">if</span> <span class="n">ch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">channel_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">channel_mentions</span><span class="p">)</span>
    <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Channel </span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> removed from being a music channel.&quot;</span><span class="p">)</span>
    <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Music Channels&#39;</span><span class="p">,</span> <span class="n">channel_mentions</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="extentions.sp2yt.SpotifyToYoutube.MusicAddIgnoredRoles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">MusicAddIgnoredRoles</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>/sp2yt_manage ignored_role add</p>

<details class="description">
  <summary>Description</summary>
  <p>Add a role to the list of roles ignored in music channels.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>role</code></td>
          <td>
                <code><span title="interactions.OptionType">OptionType</span>.<span title="interactions.OptionType.ROLE">ROLE</span></code>
          </td>
          <td><p>Get the role that is being ignored</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>extentions/sp2yt.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_role&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;Make a role to be ignored in music channels.&#39;</span><span class="p">)</span>
<span class="nd">@role</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">MusicAddIgnoredRoles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">ROLE</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_role add</span>
<span class="sd">    Description:</span>
<span class="sd">        Add a role to the list of roles ignored in music channels.</span>

<span class="sd">    Args:</span>
<span class="sd">        role (OptionType.ROLE): Get the role that is being ignored</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="n">ignored_roles</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_roles</span>
    <span class="k">if</span> <span class="n">ignored_roles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ignored_roles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is already ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ignored_roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">role</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_role</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">]</span>
    <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">role_mentions</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">role_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">role_mentions</span><span class="p">)</span>
    <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Role </span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> was added to roles ignored in music channels.&quot;</span><span class="p">)</span>
    <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Roles&#39;</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="extentions.sp2yt.SpotifyToYoutube.MusicRemoveIgnoredRoles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">MusicRemoveIgnoredRoles</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">role</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>/sp2yt_manage ignored_role remove
Remove a role from the list of roles that are ignored in music channels.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>role</code></td>
          <td>
                <code><span title="interactions.OptionType">OptionType</span>.<span title="interactions.OptionType.ROLE">ROLE</span></code>
          </td>
          <td><p>Role that is gonna be ignored</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>extentions/sp2yt.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_role&#39;</span><span class="p">,</span> <span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove a role from being ignored in music channels.&#39;</span><span class="p">)</span>
<span class="nd">@role</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">MusicRemoveIgnoredRoles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">ROLE</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_role remove</span>
<span class="sd">    Remove a role from the list of roles that are ignored in music channels.</span>

<span class="sd">    Args:</span>
<span class="sd">        role (OptionType.ROLE): Role that is gonna be ignored</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="n">ignored_roles</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_roles</span>
    <span class="k">if</span> <span class="n">ignored_roles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ignored_roles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s1"> is not being ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ignored_roles</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">role</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_role</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_roles</span><span class="p">]</span>
    <span class="n">role_mentions</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">mention</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">role_mentions</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">role_mentions</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">role_mentions</span><span class="p">)</span>
    <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Role </span><span class="si">{</span><span class="n">role</span><span class="o">.</span><span class="n">mention</span><span class="si">}</span><span class="s2"> was removed from being ignored in music channels.&quot;</span><span class="p">)</span>
    <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Roles&#39;</span><span class="p">,</span> <span class="n">role_mentions</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="extentions.sp2yt.SpotifyToYoutube.MusicAddIgnoredMember" class="doc doc-heading">
<code class="highlight language-python"><span class="n">MusicAddIgnoredMember</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>/sp2yt_manage ignored_member add</p>

<details class="description">
  <summary>Description</summary>
  <p>Add a user to the list of ignored users in music channels.
This means that they will not be able to use any commands in music channels.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>user</code></td>
          <td>
                <code><span title="interactions.OptionType">OptionType</span>.<span title="interactions.OptionType.USER">USER</span></code>
          </td>
          <td><p>User to add to the ignored list</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>extentions/sp2yt.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_member&#39;</span><span class="p">,</span> <span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="s1">&#39;Make a member to be ignored in music channels.&#39;</span><span class="p">)</span>
<span class="nd">@user</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">MusicAddIgnoredMember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">USER</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_member add</span>
<span class="sd">    Description:</span>
<span class="sd">        Add a user to the list of ignored users in music channels.</span>
<span class="sd">        This means that they will not be able to use any commands in music channels.</span>

<span class="sd">    Args:</span>
<span class="sd">        user (OptionType.USER): User to add to the ignored list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="n">ignored_users</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_users</span>
    <span class="k">if</span> <span class="n">ignored_users</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ignored_users</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">|</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> is already ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ignored_users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">]</span>
    <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">)&#39;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">users</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">users</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
    <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Member </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">) was added to members ignored in music channels.&quot;</span><span class="p">)</span>
    <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Members&#39;</span><span class="p">,</span> <span class="n">users</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>






<div class="doc doc-object doc-function">



<h3 id="extentions.sp2yt.SpotifyToYoutube.MusicRemoveIgnoredMember" class="doc doc-heading">
<code class="highlight language-python"><span class="n">MusicRemoveIgnoredMember</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>/sp2yt_manage ignored_member remove</p>

<details class="description">
  <summary>Description</summary>
  <p>Remove a user from the ignored list for music channels.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>user</code></td>
          <td>
                <code><span title="interactions.OptionType">OptionType</span>.<span title="interactions.OptionType.USER">USER</span></code>
          </td>
          <td><p>Specify the user to be removed from the ignored list</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>extentions/sp2yt.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@sp2yt_manage</span><span class="o">.</span><span class="n">subcommand</span><span class="p">(</span><span class="s1">&#39;ignored_member&#39;</span><span class="p">,</span> <span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="s1">&#39;Remove a member from being ignored in music channels.&#39;</span><span class="p">)</span>
<span class="nd">@user</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">MusicRemoveIgnoredMember</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span><span class="n">InteractionContext</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">USER</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;/sp2yt_manage ignored_member remove</span>
<span class="sd">    Description:</span>
<span class="sd">        Remove a user from the ignored list for music channels.</span>


<span class="sd">    Args:</span>
<span class="sd">        user (OptionType.USER): Specify the user to be removed from the ignored list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">defer</span><span class="p">(</span><span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s2">&quot;guildid&quot;</span><span class="p">:</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">settings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">sp2yt</span><span class="p">(</span><span class="n">guildid</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
    <span class="n">ignored_users</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ignored_users</span>
    <span class="k">if</span> <span class="n">ignored_users</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ignored_users</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">|</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> is not being ignored in music channels.&#39;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ignored_users</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">settings</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ignored_users</span><span class="p">]</span>
    <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">)&#39;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">users</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">users</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
    <span class="n">embed</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Member </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">) was removed from being ignored in music channels.&quot;</span><span class="p">)</span>
    <span class="n">embed</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="s1">&#39;Ignored Members&#39;</span><span class="p">,</span> <span class="n">users</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>