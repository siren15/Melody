{% extends 'base.html' %}

{% block head %}
<style>
  .c-border{
    border: 2px solid #bcb6dc;
  }
  #guild{
    background-color: #4d555b;
    border: 5px solid #4d555b;
    border-radius: 3px;
    width: 300px;
  }
  #guild:hover{
    border: 5px solid #ffffff;
  }
  a{
    text-decoration: none !important; 
    color: white !important;
  }
  a:hover{
    /* box-shadow: inset 0 -1.2em 0 #725a7a86; */
    color: white !important;
  }
  .ah{
    color: white !important;
  }
  .ah:hover{
    color: #ffcc50 !important;
  }
  .btn{
    width: 105px;
    height: 38px;
    text-align: center;
  }
</style>
<nav class="navbar navbar-expand-lg fixed-top" style="height: 60px; background-color: #ffd66ed0;">
  <div class="d-flex container-fluid">
    <a class="mx-2" href="/melody">
      <img class="rounded-circle" style="height: 45px; width: auto;" src="https://images-ext-2.discordapp.net/external/n7heL_LvVUOohEeWfV4crtDZv7dKixvGxC8IpPHnMmc/%3Fsize%3D4096/https/cdn.discordapp.com/avatars/887648476387762186/ab9b45d840a51ce343c2f9cf17e1ece8.png?width=676&height=676" alt="">
    </a>
    <a class="mx-2" href="/melody"><h4>Melody</h4></a>

    <button id="sidebarToggle" class="btn btn-outline-light d-lg-none mx-2" data-bs-toggle="offcanvas" data-bs-target="#sidebar" aria-controls="sidebar" style="width: 50px; height: 40px;">
      <i class="fa-solid fa-bars"></i>
    </button>
    
    <div class="d-none d-lg-block me-auto">
      <a class="btn btn-outline-light mx-2 ah" href="/">Home</a>
      <a class="btn btn-outline-light mx-2 ah" href="https://discord.gg/gravityfalls">Discord</a>
      <a class="btn btn-outline-light mx-2 ah" href="/melody/docs">Docs</a>
      <a class="btn btn-outline-light mx-2 ah" href="https://github.com/siren15/melody">GitHub</a>
    </div>
    <div is="usrdiv" class="d-none d-lg-block">
      {% if user %}
        <a id="usr" href="/melody/user"><img class="rounded-circle mx-2" style="width: auto; height: 45px;" src="https://cdn.discordapp.com/avatars/{{user.id}}/{{user.avatar}}.png"></img>{{user.username}}#{{user.discriminator}}</a>
        <a href="/melody/logout" class="btn btn-outline-danger mx-2" style="color: white; width: 50px;"><i class="fa-solid fa-arrow-right-from-bracket"></i></a>
      {% else %}
        <a href="/melody/login" class="btn btn-outline-warning mx-2" style="color: white;">Login</a>
      {% endif %}
    </div>
  </div>
  <div class="offcanvas offcanvas-end d-lg-none" id="sidebar" aria-labelledby="offcanvasRightLabel" tabindex="-1" style="background-color: #4d555b; color: #ffffff; width: fit-content;">
    <div class="offcanvas-header">
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="navbar-nav justify-content-center flex-grow-1 pe-3 me-auto">
        <li class="nav-item"><a class="btn btn-outline-light mx-2 my-2 ah" href="/">Home</a></li>
        <li class="nav-item"><a class="btn btn-outline-light mx-2 my-2 ah" href="https://discord.gg/gravityfalls">Discord</a></li>
        <li class="nav-item"><a class="btn btn-outline-light mx-2 my-2 ah" href="/melody/docs">Docs</a></li>
        <li class="nav-item me-auto"><a class="btn btn-outline-light mx-2 my-2 ah" href="https://github.com/siren15/melody">GitHub</a></li>
      </div>
      <hr>
      <div class="">
        <div is="usrdiv">
          {% if user %}
            <a id="usr" href="/melody/user"><img class="rounded-circle mx-2" style="width: auto; height: 45px;" src="https://cdn.discordapp.com/avatars/{{user.id}}/{{user.avatar}}.png"></img>{{user.username}}#{{user.discriminator}}</a>
            <a href="/melody/logout" class="btn btn-outline-danger mx-2" style="color: white; width: 50px;"><i class="fa-solid fa-arrow-right-from-bracket"></i></a>
          {% else %}
            <a href="/melody/login" class="btn btn-outline-warning mx-2" style="color: white;">Login</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</nav>
{% endblock %}

{% block body %}
<object style="position: fixed; top: 60%; left: 73%; margin-right: -50%; transform: translate(-50%, -50%); z-index: -1;" id="wave" data="{{ url_for('static', path='images/small_wave.svg') }}" type="image/svg+xml"></object>
{% endblock %}

{% block centerbox %}
<div class="col my-3 mx-3">
  <h1>Servers</h1>
</div>
<div class="col my-3 mx-3">
  <div class="row row-cols-1 justify-content-center">
    {% for guild in shared_guilds %}
    <a id="guild" class="col my-3 mx-3" href="/melody/user/{{guild.id}}">
      <div id="{{guild.id}}">
        <img class="rounded-circle my-2 mx-1" style="width: auto; height: 60px" src="https://cdn.discordapp.com/icons/{{guild.id}}/{{guild.icon}}.png"> </img>
      </div>
      <script>
        var guild_name = "{{guild.name}}";
        var guild = document.getElementById("{{guild.id}}");
        if (guild_name.length > 20){
          name = guild_name.substring(0, 17) + "...";
        }
        else{
          name = guild_name;
        }
        guild.innerHTML += name;
      </script>
    </a>
    {% endfor %}
  </div>
</div>
{% endblock %}